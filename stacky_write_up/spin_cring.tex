%%%%%%%%%%%%%%%%%%%%%
%   AMS packages    %
%%%%%%%%%%%%%%%%%%%%%
\documentclass{amsart}

\usepackage{amsmath}
\usepackage{amsxtra}
\usepackage{amscd}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{eucal}
\usepackage[all]{xy}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{mathrsfs}
\usepackage{subfiles}
\usepackage{mathpazo}
\usepackage{euler}
\usepackage{hyperref}
\usepackage{color}
\usepackage{longtable} 

\usepackage[colorinlistoftodos, textsize=tiny]{todonotes}
\def\listtodoname{List of Todos}
\def\listoftodos{\@starttoc{tdo}\listtodoname}

%\addtolength{\oddsidemargin}{-.5 in}
	%\addtolength{\evensidemargin}{-.4 in}
	%\addtolength{\textwidth}{1 in}
%
	%\addtolength{\topmargin}{0 in}
	%\addtolength{\textheight}{0 in}

\RequirePackage{color}
\definecolor{myred}{rgb}{0.75,0,0}
\definecolor{mygreen}{rgb}{0,0.5,0}
\definecolor{myblue}{rgb}{0,0,0.65}

%\usepackage{hyperref}
  %\hypersetup{colorlinks=true,citecolor=blue}

\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{matrix,arrows,decorations.pathmorphing}

%%%%%%%%%%%%%%%%%%%%%%% amsthm theorem styles %%%%%%%%
%%%%%%%%%%%%%%%

\theoremstyle{plain}
  \newtheorem{thm}{Theorem}[section]
  \newtheorem{prop}[thm]{Proposition}
  \newtheorem{lem}[thm]{Lemma}
  \newtheorem{cor}[thm]{Corollary}
	\newtheorem{claim}[thm]{Claim}
	\newtheorem{question}[thm]{Question}
	
\theoremstyle{definition}
  \newtheorem{defn}[thm]{Definition}
  \newtheorem{example}[thm]{Example}
  \newtheorem{exer}[thm]{Exercise}
  \newtheorem{ctexample}[thm]{Counterexample}
  \newtheorem{convention}[thm]{Convention}
	\newtheorem{conjecture}[thm]{Conjecture}
	
\theoremstyle{remark}
	\newtheorem{rem}[thm]{Remark}
  \newtheorem{note}[thm]{Notation}
  \newtheorem*{note*}{Notation}
  \newtheorem{case}{Case}
	
\numberwithin{equation}{section}

%%%%%%%%%%%%%%%%%%%%%%%%% custom commands %%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand\nc{\newcommand}
\nc\on{\operatorname}
\nc\renc{\renewcommand}
\newcommand\ssec{\subsection}
\newcommand\sssec{\subsubsection}
\newcommand\bO{{\mathbf O}}
\newcommand\CC{{\mathcal C}}
\newcommand\BN{{\mathbb N}}
\newcommand\BC{{\mathbb C}}
\newcommand\BF{{\mathbb F}}
\newcommand\BR{{\mathbb R}}
\newcommand\BQ{{\mathbb Q}}
\newcommand\BP{{\mathbb P}}
\newcommand\BBZ{{\mathbb Z}}
\newcommand\uR{\underline{R}}
\newcommand\uZ{\underline{\BBZ}}
\newcommand\CF{{\mathcal F}}
\newcommand\uCF{\underline{{\mathcal F}}}
\newcommand\BZ{{\mathbb Z}}
\newcommand\BA{{\mathbb A}}
\newcommand\fa{{\mathfrak a}}
\newcommand\fp{{\mathfrak p}}
\newcommand\fq{{\mathfrak q}}
\newcommand\fm{{\mathfrak m}}
\newcommand\so{{\mathscr O}}
\newcommand\sg{{\mathscr G}}
\newcommand \sx{\mathscr X}

\newcommand\scm{{\mathscr M}}
\newcommand\scn{{\mathscr N}}
\newcommand\scf{{\mathscr F}}
\newcommand\scg{{\mathscr G}}
\newcommand\sco{{\mathscr O}}
\newcommand\sch{{\mathscr H}}
\newcommand\scl{{\mathscr L}}
\newcommand\sci{{\mathscr I}}

\newcommand{\id}{\mathrm{id}}
\newcommand\im{\text{im }}
\newcommand\coker{\text{coker}}
\newcommand \spec{\text{Spec }}
\newcommand \proj{\text{Proj }}
\newcommand \rspec{\textit{Spec }}
\newcommand \rproj{\textit{Proj }}
\newcommand{\gal}{\mathrm{Gal}}

\newcommand \trdeg{\text{tr. deg }}
\newcommand \codim{\text{codim}}
\newcommand \rk{\text{rk }}
\newcommand \di{\text{div }}
\newcommand \depth{\text{depth }}
\DeclareMathOperator{\ord}{ord}

%%%%%%%%%%%%%%%%%%%%% cring custom commands %%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand \subhalf[1]{\frac{{#1} - 1}{2{#1}}}
\newcommand{\se}[1]{\section*{Problem #1}}
\newcommand \halfcan{L}
\newcommand \Supp{\text{Supp}}
\newcommand \initial{\text{in}}
\newcommand \gin{\text{gin}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% title %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Spin canonical divisors of log stacky curves}

\author{Aaron Landesman}
\address[Aaron Landesman]{Department of Mathematics, Harvard University}
\email{aaronlandesman@college.harvard.edu}

\author{Peter Ruhm}
\address[Peter Ruhm]{Department of Mathematics, Stanford University}
\email{pruhm@stanford.edu}

\author{Robin Zhang}
\address[Robin Zhang]{Department of Mathematics, Stanford University}
\email{robinz16@stanford.edu}

\date{\today}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% document %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{abstract}
  Arithmetic geometry group at the Emory University Number Theory
	REU.
\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\todo{Edit this stuff}
This is our project.
Modular Forms.


Example, stuff from Voight and Zureick-Brown \cite{vzb:stacky}
and O'Dorney's paper \cite{dorney:canonical}.

We consider divisors of the form $D = \sum_{i = 1}^{r} \subhalf{e_i}$.

\subsection{Main Results}
These are our results.
\begin{thm}
\label{thm:g_0_generators_relations}
Let $(\sx, \Delta, L)$ be a tame log spin curve over a perfect field $k$, so
that $\sx$ has signature $\sigma = (0; e_1, \ldots, e_r; \delta)$. Then the
canonical ring

\begin{align*}
	R(\sx, \Delta, L) = \bigoplus_{d = 0}^\infty H^0(\sx, \sco(L)^{\otimes d})
\end{align*}

\noindent
is generated as a $k$-algebra by elements of degree at most $e = 
\max(5,e_1,\ldots, e_r)$ with relations in degree at most $2e$, so 
long as $\sigma$ does not lie in a finite list of exceptions. \todo{
Include reference to the table with this list of exceptions.}
\end{thm}


\section{Background}
Look at Spencer-Kodaira \cite{kodaira:complex-manifolds}.
\todo{edit this}

\subsection{Definitions}
Here are some definitions.

\begin{defn}
\textbf{Saturations} of the canonical divisor, as defined in 7.
2 of VZB \cite{vzb:stacky}.
\end{defn}

\section{General Lemmata}
First we present the general inductive lemmata that will be applied
for all genera.


\ssec{General: quadratic initial ideal minimal relations}
First we prove a nice result about minimal generation of ideals of relations:

\todo{Include one of the following, if the first one, include a remark for quotient}
\begin{lem}
\label{lem:minimal_quadratic}
Suppose $k[x_1,\ldots, x_n]$ is a graded ring, not necessarily
generated in degree 1, is equipped with a monomial ordering $\prec$.
 Let $\phi:k[x_1,\ldots, x_n] \rightarrow B$ be a map of graded
rings with kernel $I,$ such that $I$ is generated by elements $f_1,
\ldots, f_j$, where $in_\prec(f_i) = x_ix_j,$ and no term of $f_i$
is of the form $x_k$. Then, the elements $f_i$ determine minimal
generators for $I$.
\end{lem}
\begin{proof}
Regrade the ring $k[x_1, \ldots, x_n]$ so that all $x_i$ lie in
degree 1. Then,
\[
	\phi : k[x_1, \ldots, x_n] \rightarrow B
\]
\noindent
determines a map of rings, no longer necessarily graded. Consider
the grlex monomial ordering $<$ on $k[x_1, \ldots, x_n]$.
\todo{This ordering isn't quite right. 
We need to preserve the ordering on quadratic terms}
By
assumption, the kernel $I$ is generated by elements whose initial
terms have degree 2 and are all distinct. Therefore, $\dim_k (k[x_1,
\ldots, x_n])_2 = \binom{n}{2}-j.$ This implies any set of
generators for $I$ must have at least $j$ elements. Since $f_1,
\ldots, f_j$ is such a set, it is minimal.
\end{proof}

%
%\begin{lem}
%\label{lem:minimal_quadratic_2}
%Suppose $k[x_1, \ldots, x_n]\hookrightarrow k[x_1, \ldots, x_n, y_1, \ldots, y_m]$ be graded ring, not necessarily
%generated in degree 1 that are equipped with monomial ordering $\prec$.
 %Let $\phi: k[x_1, \ldots, x_n] \twoheadrightarrow B, \phi':k[x_1, \ldots, x_n, y_1, \ldots, y_m]\twoheadrightarrow B'$ be maps of graded
%rings with kernels $I \hookrightarrow I'$ such that the following diagram commutes:
%\[
	%\begin{tikzcd}
	%I\ar[hookrightarrow]{r}\ar[hookrightarrow]{d} & k[x_1, \ldots, x_n]\ar[twoheadrightarrow]{r} \ar[hookrightarrow]{d} & B \ar[hookrightarrow]{d}\\
	%I' \ar[hookrightarrow]{r} & k[x_1, \ldots, x_n, y_1, \ldots, y_m] \ar[twoheadrightarrow]{r}& B'
	%\end{tikzcd}
%\]
%Further suppose that $I'$ is generated over $I$ by elements $f_1,
%\ldots, f_j$ as a $k$-vector space, where $in_\prec(f_i) \in \{y_ix_j, y_iy_j\}$ and no monomial of $f_i$
%is of the form $y_i$.  Then, the elements $f_i$ determine minimal
%generators for $I'$ over $I$.
%\end{lem}
%
%\begin{proof}
%Regrade the rings $k[x_1, \ldots, x_n], k[x_1, \ldots, x_n, y_1, \ldots, y_m]$ so that all $x_i$ and $y_j$ lie in
%degree 1. Then,
%\[
	%\phi : k[x_1, \ldots, x_n] \twoheadrightarrow B 
%\]
%\[
	%\phi': k[x_1, \ldots, x_n, y_1, \ldots, y_m] \twoheadrightarrow B'
%\]
%
%
%\noindent
%determines map of rings, no longer necessarily graded. 
%By assumption, $I'$ is generated over $I$ as a $k$-vector space by elements $f_1, \ldots, f_n$ whose initial terms have degree 2 and are linearly independent.  By the theory of Grobner basis,
%\[
	%\dim_k(B'/B)_2=\dim_k(k[x_1, \ldots, x_n, y_1, \ldots, y_m]/k[x_1, \ldots, x_n])_2 - j
%\]
%so
%\[
	%\dim_k (I'/I)_2=j.
%\]
%This implies any set of
%generators for $I$ must have at least $j$ elements. Since $f_1,
%\ldots, f_j$ is such a set, it is minimal.
%\end{proof}
%

\begin{rem}\label{rem:minimal_quadratic_trivial_case}
It will be useful to use lemma \ref{lem:minimal_quadratic} in the
case $m=0$, in which case we find explicitly that $f_1, \ldots, f_r$
are $k$-minimal generators for $I'$ (over the trivial base vector
space).  
\end{rem}

TRANSITION
\todo{transition!}

\ssec{Inductive Theorem: Increasing the Ramification Orders}
\label{ssec:g_0_ram_orders}
In this section, we aim to prove the inductive theorem, Theorem
~\ref{thm:ram_order_ind}. Under fairly general
conditions, this theorem will allow us to show that if Theorem ~\ref
{thm:ram_order_ind} holds for a curve with signature
$(0;e_1',\ldots, e_r';0)$ then it also holds for a curve with
signature $(0;e_1,\ldots, e_r;0)$ with $e_i' - e_i \in \{0,2\}$.

\begin{defn}
\label{defn:admissible}
Let $(\sx', 0, L'),(\sx, 0, L)$ be tame, 
separably rooted log stacky spin
curves, both ramified over ramified at $Q_1,\ldots, Q_r$. Suppose
there is a birational map $\sx \rightarrow \sx'$, and let $J \subset
\{1, \ldots, r\}$. Suppose $e_i'+ 2\chi_J(i) = e_i$ where

$$\chi_J(i) = \begin{cases}
	1, &\text{ if }i \in J\\
	0, &\text{ otherwise. } 
\end{cases}$$

Let $R'$ be the canonical ring associated to $\sx'$. Say $(\sx',J)$,
{\bf admissible} if the following three conditions hold.  \todo{Peter: We should make the definition of admissibility be a condition for the triple: $(\sx',\sx,J)$.}

\begin{enumerate}
	\item[(Ad-i)] Suppose for all $i \in J$, there exists $y_{i,e_i'} 
		\in R'$ so that $R'$ admits a presentation
		\begin{align*}
			R' \cong \left( k[x] \otimes k[y_{i,e_i'}]_{i \in J} \right)/I'
		\end{align*}
		so that for all $i \in J$ we have $\deg y_{e_i'} = e_i'$ and $-ord_{
		Q_i}(y_{i,e_i'}) = \frac{e_i'-1}{2}$.
	\item[(Ad-ii)] For all $i \in J$, any generator $z \neq y_{i,e_i'}$
		of $R'$ satisfies
		\begin{align*}
			\frac{- ord_{Q_i}(z)}{\deg z} < \subhalf {e_i'}.
		\end{align*}
	\item[(Ad-iii)] For all $i \in J$ we have
		\begin{align*}
			\deg \lfloor e_i L \rfloor \geq 2g - 1 + \max_{d \geq 0} \# S_{\sigma, J}(i, d)
		\end{align*}
		\todo{Check the 2g - 1, in particular, David seems to think we are usually 1 off and possibly 2 off when g = 1. I have a feeling this is a mistake, but don't understand why.} 
		where
		\begin{align*}
			S_{\sigma, J}(i, d) := \{j \in J : j \neq i \text{ and } e_j'+2d
			\mid e_i - e_j'\}
		\end{align*}
\end{enumerate}
\end{defn}

\begin{lem}
\label{lem:admissible_inequality}
Condition (Ad-ii) of Definition ~\ref{defn:admissible} implies the
stronger condition that

\begin{align*}
	-\ord_{Q_i}(z) \leq \deg(z) \subhalf{e_i'}-\frac{1}{e_i'}
\end{align*}
\end{lem}

\begin{proof}
We know by (Ad-ii) that

\begin{align*}
	-\ord_{Q_i}(z) < \deg(z) \subhalf{e_i'}
\end{align*}

\noindent
If we write $\frac{\alpha}{\beta} = \deg(z) \frac{e_i'-1}{2e_i'}$ 
as a fraction in lowest terms, then we see $\beta \mid e_i'$ since $
e_i'-1$ is even. Therefore, since $-\ord_{Q_i}(z)$ is an integer, 
we must have

\begin{align*}
	-\ord_{Q_i}(z) \leq \deg(z) \subhalf{e_i'}- \frac{1}{\beta} \leq 
	\deg(z) \subhalf{e_i'}- \frac{1}{e_i'}.
\end{align*}
\end{proof}

\begin{lem}
\label{lem:admissible_subset}
If $(\sx', J)$ is admissible and $W \subset J$ is any subset,
then $(\sx', W)$ is also admissible.
\end{lem}

\begin{proof}
Each of the conditions (Ad-i), (Ad-ii), and (Ad-iii) hold for $W$
if they hold for $J$.
\end{proof}

\begin{thm}
\label{thm:ram_order_ind}
Suppose $(\sx', 0, L')$ \todo{Peter: You should also instantiate $(\sx,0,L)$ as well} is a tame separably rooted log stacky spin
curve and $(\sx', J)$ is admissible with generators $y_{i,e_i'} \in
R' = R_{L'}$ as in (Ad-i) of Definition ~\ref{defn:admissible}.
Then the following are true:
\begin{enumerate}
	\item[(a)] For all $i \in J$, there exists $y_{i,e_i} \in
		H^0(\sx, e_i(K_\sx))$ so that
		\begin{align*}
			-ord_{Q_i}(y_{i,e_i}) = \frac{e_i-1}{2}
		\end{align*}
		and
		\begin{align*}
			\frac{-\ord_{Q_j}(y_{i,e_i})}{\deg (y_{i,e_i})} \leq \subhalf{e_j'}-
			\frac{1}{\deg(y_{i,e_i})e_j'}
		\end{align*}
		for all $j \in J$ with $j \neq i$.
	\item[(b)] The elements $y_{i,e_i'}^ay_{i,e_i}^b,$ with $a \geq 0,
		b > 0$ span $R$ over $R'$ and the elements $y_{i,e_i}$ minimally
		generate $R$ over $R'$.
	\item[(c)] Equip $k[y] = k[y_{i,e_i}]_{i \in J}$ and $k[x]$ with
		any graded monomial order and $k[y,x] = k[y] \otimes k[x]$ with
		block order. Let $R = k[y,x]/I.$ Then,
		\begin{align*}
			in_\prec(I) = in_\prec(I')k[x,y] + \langle y_{i,e_i}z \mid z 
			\neq y_{i,e_i},y_{i,e_i'} \rangle
		\end{align*}
		as $z$ ranges over all generators of $R$.
	\item[(d)] Suppose $in_\prec(I')$ is minimally generated by
		products of two monomials and that for all $i \in J$, we have $e
		_i > \deg z$ for any generator $z$ of $R'.$ Then any set of
		minimal generators for $I'$ together with any set of relations as in 
		part (c) minimally generate $I$.
	\item[(e)] For any $W \subset J,$ the set $(\sx,W)$ is admissible.
\end{enumerate}
\end{thm}

\begin{proof}
Let $(\sx, 0, L)$ and $(\sx', 0, L')$ be the two log stacky spin curves in 
question, with coarse spaces $X = X'$. 
\todo{possibly generalize these to arbitrary log stacky $\Delta \neq 0$ spin curves}
Define

\begin{align*}
	S(i,0) = \{j \in J : j \neq i \text{ and }e_j' \mid e_i\}
\end{align*}

\noindent
Define
\begin{align*}
	E_i = \sum_{j \in S(i,0)}^{}Q_j
\end{align*}

\noindent
Note that
\begin{align*}
	\lfloor e_i L' \rfloor + Q_i \leq \lfloor e_i L \rfloor 
\end{align*}

\noindent
and so we obtain an inclusion
\begin{align*}
	H^0(\sx',e_iL'-E_i + Q_j) \rightarrow H^0(\sx,e_iL - E_i) \subset 
H^0(\sx,e_iL).
\end{align*}\todo{Peter: should be $Q_i$?}

\noindent
The assumption (Ad-iii) implies
\begin{align*}
	\deg \left( e_i L' - E_i \right) \geq 2g-1
\end{align*}

\noindent
implying that $H^0(\sx',e_iL'-E_i + Q_i)$ is base point free by 
Riemann Roch \todo{Peter: Or more for higher genus, by our hypothesis}, and so a general element
\begin{align*}
	y_{i,e_i} \in H^0(\sx',e_iL'-E_i + Q_i)
\end{align*}

\noindent
satisfies
\begin{align*}
	-\ord_{Q_i}(y_{i,e_i}) = \lfloor e_i \subhalf {e_i'} \rfloor +1 =
	\frac{e_i - 1}{2}
\end{align*}

\noindent
Therefore, $y_{i,e_i}$ satisfies the first part of the claim of $(a)$.

We next show $y_{i,e_i}$ also satisfies the second part of the
claim of $(a),$ by considering separately the cases of whether $j
\in S(i,0),$ and $j \notin S(i,0)$.

If $j \in S(i,0)$ then, since $E_i \geq Q_j$, and $y_{i,e_i} \in H^0
(\sx',e_iL'-E_i + Q_i)$,
\begin{align*}
	-\ord_{Q_j}(y_{i,e_i}) \leq e_i\subhalf {e_j'} - 1 \leq e_i 
	\subhalf{e_j'} - \frac{1}{e_j'}.
\end{align*}

If instead $j \notin S(i,0)$, then since $e_j' \nmid e_i$, we know
$e_i\subhalf{e_j'} \notin \BZ$, so
\begin{align*}
	-\ord_{Q_j}(y_{i,e_i}) \leq \lfloor  e_i\subhalf{e_j'} \rfloor 
	\leq e_i\subhalf{e_j'} - \frac{1}{e_j'},
\end{align*}

\noindent
completing the proof of (a).

Next, define $R_0 = R'$ and inductively define 
$$R_i = \begin{cases}
	R_{i-1} &\text{ if }i \notin J\\
	R_{i-1}[y_{i,e_i}] &\text{ otherwise.} 
\end{cases}$$

\noindent
To prove (b), it suffices to show that elements of the form $y_{i,e_
i'}^ay_{i,e_i}^b$ with $a \geq 0, b > 0$ are linearly independent,
and that these elements together with $R_{i-1}$ span $R_i$ as a $k$-
vector space. These elements do not lie in $R_{i-1}$ because their
order of pole at $Q_i$ is bigger than the order of any element in $R
_{i-1}$, and are linearly independent amongst themselves because of
injectivity of the linear map

\begin{align*}
	(a,b) \mapsto \left( \deg\left(y_{i,e_i'}^ay_{i,e_i}^b\right),-
	\ord_{Q_i}\left( y_{i,e_i'}^ay_{i,e_i}^b \right)  \right) = (a,b) 
	\begin{pmatrix}
		e_i-2 & \frac{e_i-3}{2} \\
		e_i	 & \frac{e_i-1}{2}
	\end{pmatrix} 
\end{align*}

\noindent
The fact the the elements $y_{i,e_i'}^ay_{i,e_i}^b$ with $a \geq 0,
b > 0$ span $R_i$ over $R{i-1}$ follows from the fact that the
integer lattice points in the cone generated by the vectors $\left(e
_i-2, \frac{e_i-3}{2} \right)$ and $\left(e_i, \frac{e_i-1}{2}
\right)$ is saturated, as the corresponding determinant is
\begin{align*}
	(e_i-2) \frac{e_i-1}{2} - e_i \frac{e_i-3}{2} = 1,
\end{align*}
completing part (b).

To show (c), we wish to show $y_{i,e_i}z \in R'$ for $z \neq y_{i,e_
i},y_{i,e_i'}$. Note that $f\in R$ lies in $R'$ if and only if for
all $j \in J$ we have
\begin{align*}
	-\ord_{Q_j}(f) \leq \deg f \left( \subhalf {e_j'} \right) 
\end{align*}

\noindent
We now check this in three cases, depending on whether $j \notin \{
i \} \cup S(i,0),j = i,$ or $j \in S(i,0)$.

\vskip.1in
\noindent
{\sf Case 1: $j \notin \{i \} \cup S(i,0).$}

Here, $-\ord_{Q_j}(L) = -\ord_{Q_j}(L'),$ so
\begin{align*}
	-\ord_{Q_j}(y_{i,e_i})-\ord_{Q_j}(z) \leq e_i \subhalf {e_j'} +
	\deg z \subhalf {e_j'} = \deg (y_{i,e_i}z) \subhalf{e_j'}. 
\end{align*}

\vskip.1in
\noindent
{\sf Case 2: $j =i.$}

By part (a), condition (Ad-ii), and Lemma
~\ref{lem:admissible_inequality} we have
\begin{align*}
	-\ord_{Q_j}(y_{i,e_i})-\ord_{Q_j}(z)
	&\leq \frac{e_j-1}{2} + \deg z \left( \subhalf{e_j'} \right) -\frac{1}{e_j'} \\
	& = \frac{e_j-1}{2}-\frac{1}{e_j'}+\deg z \left( \subhalf{e_j'} \right) \\
	&= \frac{e_j(e_j-3)}{2(e_j-2)}+\deg z \left( \subhalf{e_j'} \right) \\
	&= \deg (y_{i,e_i}z) \subhalf{e_j'}.
\end{align*}

\vskip.1in
\noindent
{\sf Case 3: $j \in S(i,0).$}

In this case, we may first assume $z \neq y_{j,e_j}$, 
as this is covered by case 2, with $i$ and $j$ reversed. 
Hence, 
\begin{align*}
	-\ord_{Q_j}(z) \leq \deg z \subhalf{e_j'}
\end{align*}
implying
\begin{align*}
	-\ord_{Q_j}(y_{i,e_i})-\ord_{Q_j}(z) 
	&\leq  e_i \subhalf{e_j'} + \deg z \subhalf{e_j'} 
	= \deg (y_{i,e_i}z) \subhalf{e_j'},
\end{align*}
completing part (c).

Next, note that the minimal generators of $I'$ together with the
new generators of $I$ given in (c) have independent initial terms
by construction, and therefore are minimal by Lemma
~\ref{lem:minimal_quadratic}.

Finally, to check (e), we will first show that $(\sx,J)$ is
admissible. We know (Ad-i) is satisfied by part (b), taking the $y_{
i,e_i}$ as the generators in degree $e_i$. Next, (Ad-ii) is
strictly monotonic in the $e_i$, and hence also holds for $(\sx,J)$.
Finally, if (Ad-iii) holds for $e$ then it holds for $e+2$ by
definition. This is where we use that (Ad-iii) holds for $d > 0$
and not just for $d = 0$.

Finally, if $(\sx, J)$ is admissible then so is $(\sx,W)$ for any
$W \subset J$ by Lemma ~\ref{lem:admissible_subset}.
\end{proof}




\section{Genus one}
We now consider the case when the genus is positive. The genus zero
case is the most complicated and reserve that for Section ~\ref{sec:g_0_effective}
and Section ~\ref{sec:g_0_non_effective}. We begin with the genus one case.


\ssec{Inductive Theorem: Increasing the Number of Ramified Points for a 2-Saturated Divisor}
We prove an inductive theorem on adding 2-sat here.
\todo{description}

\begin{prop}
\label{prop:sat_two_induction}
Let $(\sx, \Delta, L)$ and $(\sx', \Delta, L')$ be log stacky spin curves. 
Let $\sx \rightarrow \sx'$ be a birational map of tame, separably rooted log stacky curves so that $\sx$ has signature 
$\sigma = (g;e_1,\ldots, e_r;\delta)$ with $g > 0,$ and, if $g = 1$ then $\deg 3L \geq 2$.
Let $R_{L'} = R' = k[x]/I'= k[x_2, x_3
, x_5,\ldots, x_m]/I'$ and let $L = L' + \frac{1}{
3}P.$ Suppose $L$ and $L'$ satisfy $sat(Eff(L')) = sat(Eff(L)) = 2.$
Suppose $\deg x_i = i$ for $i \in \{2, 3\}$ and that the ordering on $k[x]$ satisfies
\begin{align*}
	\ord_{x_2}(f) < \ord_{x_2}(g) \implies f \prec g.
\end{align*}
Then, the following statements hold.
\begin{enumerate}
	\item[(a)] General elements  $y_i \in H^0(\sx,iL)$ for $i \in \{3, 4\}$ satisfy $-\ord_P(y_i) = 1$ and any such choice of elements $y
		_3,y_4,$ minimally generate $R$ over $R'$.
	\item[(b)] Equip $k[y_3, y_4]$ with $grlex$ so that $y_3 \prec 
		y_4$
		and equip the ring $k[y_3, y_4, x]$ with the block 
		order so that $R = k[y_3, y_4, x]/I$. Let,
		\begin{align*}
			J &= gin_\prec(I')k[x, y_3, y_4] \\
			&+\langle y_4 x_j \mid 3 \leq j \leq m \rangle \\
			&+\langle y_4^2.\rangle
		\end{align*}
			Then, $gin_\prec(I) = J$.
	\item[(c)] Any set of minimal generators for $I'$ together with 
		any set of relations with leading terms as in (b) minimally 
		generate $I$.
\end{enumerate}
\end{prop}

\begin{proof}
The assumptions on $g,\sigma$ imply $H^0(\sx, 3L), H^0(\sx, 4L)$ are both base point free: If $g \geq 2$ then $\deg 3L > 2g-1$ and $\deg 4L > 2g-1$, so $H^0(\sx, 3L)$ and $H^0(\sx, 4L)$ are base point free. If $g = 1$, we assume $\deg 3L \geq 2 > 2g-1$, so we also have $\deg 4L \geq 2 > 2g -1,$ so again $H^0(\sx, 3L)$ and $H^0(\sx, 4L)$ are base point free. Therefore, general elements $y_3$ and $y_4$ satisfy $-\ord
_P(y_i) = 1$ by Riemann Roch, and the assumptions on $\sigma$. \todo{Understand why/whether we need 
to cite lemma 5.4.7.} 

In a fashion analogous to the proof of Proposition 
~\ref{prop:sat_three_induction}, we see 
the following is a $k$ basis for $R$ over $R'$:

\begin{align}
\label{eqn:sat_two_add_generator}
	\begin{split}
		&\langle y_3^ax_3^b x_4^\epsilon \mid a \geq 0, b 
		\geq 0, \epsilon \in \{0, 1\}\rangle \\
		&+\langle y_3^ay_4 \mid a \geq 0 \rangle,
	\end{split}
\end{align}

\noindent completing part (a).

To show part (b), note that the generators in
~\ref{eqn:sat_two_add_generator} are precisely a set of monomials which
generate $k[x,y]/J$ over $k$. So, to show $J = in_\prec(I)$, it
suffices to show that all generators of $J$ lie in $in_\prec(I)$.

This follows, since there exist constants $A_j \in k$ for $3 \leq j \leq m,$ and a constnant $B \in k$ and
elements $w_{i,j} \in R'$ so that the following linear combinations
of elements lie in $R'$.

\begin{align*}
	y_4x_j &- A_j y_3 w_j & \text{ so that } 3 \leq j \leq m \text{ and } \deg w_j = \deg x_j + 1\\
	y_4^2 &+ B y_3^2 x_2 \\
\end{align*}

\noindent
Of course, the initial terms of these elements are precisely the
generators of $J$, completing (b).

Finally, (c) follows immediately from Lemma ~\ref{lem:minimal_quadratic}
\end{proof}

\ssec{Genus 1 base cases}

\ssec{Main Theorem for Genus 1}


\section{High genus}

\ssec{Inductive Theorem: Adding points for high genus}

\ssec{Bounds on Generators and Relations in high genus}



\ssec{Main theorem for high genus}

\section{Genus Zero Effective}
\label{sec:g_0_effective}
Now we consider the genus zero case.
\todo{write intro}

In this section, we examine the case $2\halfcan\sim K_\sx+\Delta$ 
when $\Delta$ is a non- zero effective divisor.  Using this, we can 
reduce to looking at effective stacky divisors.  Then, applying a 
result for general effective $\mathbf{Q}$ divisors, we deduce that $
R_{\halfcan}$ is generated in degrees up to $e=\max{e_i}$ with 
relations generated up to degree $2e$ with initial terms quadratic 
in the generators.  We also demonstrate that these bounds are tight 
up to \todo{insert how tight they are}.

We have Lemma ~\ref{lem:minimal_quadratic}.
\todo{fill in hole here}

We will now prove a lemma that will be used to inductively deal with divisors that are sufficiently saturated, by combining and extending methods of VZB \todo{add 
reference} and O'Dorney\todo{reference}.

\begin{lem}
\label{lem:deg1_sat_ind}
Let $X$ be a genus $g$ curve with a $\mathbf{Q}$-divisor $D$ (as
defined by O'Dorney \todo{reference this-Section 1 of Evan's paper, or preferably define it in the background section})
satisfying $\deg(\lfloor{D}\rfloor)\ge 0$, so $R_D$ has a
generator $u$ in degree 1; let $u$ \todo{Was there supposed to be something else in this sentence?}.  Suppose $D$ is generated by $
u, x_1, \ldots, x_m$ in degree at most $\delta$ with relations generated 
in degree at most $\tau $.  Suppose $D' = D + \frac{\alpha}{\beta} P$
for some $P \not \in \Supp(D), \alpha,\beta \in \mathbf{N}$ such
that

\begin{equation}
\label{eqn:deg1_sat_ind_dim}
	h^0(X, \lfloor{dD + d\frac{\alpha}{\beta} P \rfloor}) = h^0(X,\lfloor dD
	\rfloor) + \lfloor d\frac{\alpha} {\beta} \rfloor \forall d \in \mathbf{
	N} : d \ge \frac{\beta}{\alpha}.
\end{equation}
Let 
\[
	0<\frac{c_1}{d_1}<...<\frac{c_n}{d_n}=\frac{\alpha}{\beta}
\]
be the non-negative best lower approximation.
Then 
\begin{itemize}
\item $R_{D'}$ is generated over $R_D$ by elements $y_1,...,y_n$ such that $y_i$ lies in  
degree $d_i$ and has a pole at $P$ of degree $c_i$

\item If $I$ and $I'$ are the ideal of relations of $R_D$ and $R_{D'}$ respectively, then 

\begin{align*}
	\initial_\prec(I') &= \initial_\prec(I) k[u, x_1, \ldots, x_m, y_1, \ldots, y_n] \\
										 &+ \langle y_i x_j: 1 \le i \le n, 1 \le j \le m \rangle \\
										 &+ \langle y_i y_j: \lfloor \frac{\alpha}{\beta} \rfloor \rangle \le i \le j \le n-1 \\
										 &+ \langle y_i y_j: 1\le i\le j\lfloor \frac{\alpha}{\beta} \rfloor\\
										 &+ \langle (y_i)^{\deg(y_{i+1}+1)}: 1\le i=\lfloor \frac{\alpha}{\beta} \rfloor
\end{align*}
In particular, if $\frac{\alpha}{\beta}\le 1$, then $I$ is minimally generated by elements with leading terms of the form $y_ix_j$ and $y_iy_j$.
\item If $\gin_\prec(I)=\initial_\prec(I)$ then $\gin_\prec(I')=\initial_\prec(I')$.
\item A Grobner basis with the initial terms $y_i x_j$, $y_iy_j$, and possibly $(y_{\lfloor \frac{\alpha}{\beta} \rfloor})^{y_{\lfloor \frac{\alpha}{\beta} \rfloor}+1}$ as shown above minimally generates $I'$.
\end{itemize}
\end{lem}

\begin{proof}
Observe that $u_D,x_1,...,x_m$ each of which has no pole at $P$.
These can be chosen generically to not have a zero at $P$ \todo{
check that we can actually do this, or eliminate if it turns out to
be unnecessary}.

Begin by focusing on the $d^{\text{th}}$ component of $R_{D'}$: $(R_
{D'})_d = H^0(X, \lfloor D + \frac{\alpha}{\beta} P \rfloor)$. By
our hypothesis (Equation ~\ref{eqn:deg1_sat_ind_dim}), for any $d
\in \mathbf{N}$ such that $\lfloor d \frac{ \alpha}{\beta} \rfloor > 0$,

\[
	h^0 (X, d(D+\frac{\alpha}{\beta})) = h^0(X, dD) + \deg(d\frac{\alpha}{\beta})
\]

\noindent
so in $H^0 (X, \lfloor dD' \rfloor)$ we can find elements with pole
order $i$ at $P$ for any $i \in \{0, \ldots, \lfloor d \frac{\alpha}{
\beta} \rfloor \}$. We can use a method similar to O'Dorney to
construct the $y_i$'s as desired: \todo{cite where}

Let 
\[
	0 < \frac{c_1}{d_1} < \ldots < \frac{c_n}{d_n} = \frac{\alpha}{
\beta}
\] 
be the non-negative best lower approximation of $\frac{
\alpha}{\beta}$.  Note that elements of $H^0(X,dD')$ have pole of
orders ranging from 0 to $\lfloor d_i \frac{\alpha}{\beta}\rfloor =
c_i $ at $P$.  A set of these one for each pole degree 1 to $\lfloor
d_i \frac{\alpha}{\beta} \rfloor$ are linearly independent from
each other and $(R_D)_d$, so by degree considerations, they span
$(R_{D'})_d$ over $(R_D)_d$ as $k$-vector spaces. 

For any $j < i$, $\frac{c_i}{d_i} > \frac{c_j}{d_j}$
by construction, so any product of $\prod z_i$ of elements of
degrees less than $d_i$ must have 
\[
	\frac{-\ord(z_i)}{\deg(z_i)} < \frac{c_i}{d _i},
\]
so we have the pole order of $\prod z_i$ is 
\[
	\sum -\ord(z_i) = d_i(\frac{\sum -\ord( z_i)}{\sum \deg( z_i)}) < d_i\frac{c_i}{d_i} = c_i .
\] 
Thus, the elements of $(R_{D'})_{d_i}$ with pole order $c_i$ at $P$ are not generated by 
lower degrees.  
Generically choose some $y_i \in(R_{
D'})_{d_i}$ to have maximal pole order at $P$ (note that if $d_i=1$ then 
\[
	-\ord_P(y_i)= \max(c_j:d_j=1)
\]
and if more than one $d_i$ is 1, we
must also choose them generically so they generate $(R_{D'})_1$).

Suppose $d\le \beta$ and positive $\frac{c}{d} \le \frac{\alpha}{
\beta}$ not a best lower approximation.  Then choose
best lower approximation $\frac{c_i}{d_i}$ such that $c_i\le c$ is
maximal; since $c<c_{i+1}$, $\frac{c_i}{d_i}\ge \frac{c}{d}$.  From
this we can deduce that 
\[
	c_i+(d-d_i) \lfloor \frac{\alpha}{\beta} \rfloor \ge c.
\]  
Therefore, we can generate an element of $(R_{D'})_d$ as a product of lower degrees that 
has pole degree $c$ at $P$ by either $y_i u^b$ or $y_i z u^b$, or $zu^b$ satisfying $i>
\lfloor \frac{\alpha}{\beta} \rfloor$ and $z=y_j (y_{\lfloor \frac{\alpha}{\beta} \rfloor})^b$ 
where $d_j=1$ ($=d_{{\lfloor \frac{a}{b} \rfloor}}$) and $b<d_{\lfloor \frac{\alpha}{\beta} 
\rfloor + 1}$.  
Thus, for a general $d$ (not necessarily less than $\beta$), if $\frac{c}{d} \le
\frac{\alpha}{\beta}$ is not a best lower approximation than we can
construct an element in degree $d$ with pole degree $c$ by either $y
_n^a y_i u^b$, $y_n^a zy_iu^b$ or $y_n^a z u^b$ satisfying the
same conditions.  We notice that elements of this form are all
linearly independent in $R_{D'}$.  Thus, they form a $k$-basis for
$R_{D'}$ over $R_D$.  Thus $u, x_1, ..., x_m, y_1, ..., y_n$ generate
$R_{D'}$.

Choose $x_i\in \{x_1, \ldots, x_m\}$ and $y_j\in \{y_1, \ldots, y_n\}$, where $y_j$ 
corresponds to the best lower approximation $\frac{c_j}{d_j}$.  Recall from the previous 
paragraph that we can uniquely construct an element in degree $d$ with pole order $c$ at 
$P$ by elements of the $y_n^a y_l u^b$ and $y_n^a y_l y_{l'} u^b$ with $d_l=1$ and if 
$d_{l'}=1$ then $c_{l'} = \lfloor \frac{\alpha}{\beta} \rfloor$.  Specifically, we can 
successively subtract some $\gamma_l y_l u^{b_l}$, $\gamma_l y_l z_l u^{b_l}$, or $
\gamma_l z_l$ with $y_l, z_l, b_l$ satisfying the same conditions as above and $\gamma_l
\in k$ the element ensuring that the difference decreases in pole degree at $P$ by 1.  For 
convenience, we can combine these into the case $\gamma_l (y_l)^{s_l}(z_l)^{a_l}u^{b_l}$ 
with $(s_l,a_l)\in \{(1,0),(1,1),(0,1)\}$.  In the cases when $\frac{\alpha}{\beta}<1$ so $z_l$ 
is not well-defined, just pick an arbitrary element of $R_D$ for $z_l$ ensuring that the 
expression still makes sense; in such cases we will always choose $a_l=0$ so this choice 
is irrelevant, and only makes writing out cases more convenient.  Therefore, we can write
\[
	x_i y_j - \sum_{l} (y_l)^{s_l} (z_l)^{a_l} u^{b_l}\in R_D
\]
giving us a non-trivial relation with leading term $x_iy_j$. \todo{Explicitly state ordering at 
the beginning}

Similarly, suppose $y_i,y_j\in \{y_1, \ldots ,y_{n-1}\}$ with $1<d_i$ and $j\ge i$ (that is, so 
$y_iy_j$ does not appear as a basis element of the form described above: $y_n^0 y_jy_i 
u^0$).  Choose the maximal $l$ such that $c_h\le c_i+c_j$; since $1<d_i\le d_j$, $(c_i
+c_j)-c_j>\lfloor \frac{\alpha}{\beta}\rfloor$ so $c_{j+1} < c_i + c_j$ meaning $c_h \ge c_{j
+1} > c_j$.  Furthermore, $c_i + c_j - c_h<\lfloor \frac{\alpha}{\beta} \rfloor$ so either 
$c_h=c_i+c_j$ or there is some $h'$ such that $c_{h'}=c_i+c_j-c_l$ and $d_{h'}=1$.  Since 
$\frac{c_h}{d_h}$ is a best lower approximation of $\frac{\alpha}{\beta}$ with denominator 
larger than those of $\frac{c_i}{d_i}$ and $\frac{c_j}{d_j}$, we know that since $c_h\le c_i
+c_j$ we must have $d_h<d_i+d_j$.  Thus in the case with a $y_{l'}$ term we have $d_h + 
d_{h'} = d_h + 1 \le d_i + d_j$.  That is to say, by choosing $b-d_i+d_j-ad_h-1$ we find 
(where $a\in\{0,1\}$ corresponding to if a $y_{h'}$ appears) that $y_h(y_h')^au^b$ and 
$y_iy_j$ both lie in degree $d_i+d_j$ with pole order $c_i+c_j$ at $P$.  From here we can 
follow a similar technique as in the previous paragraph to cancel out poles of $y_iy_j$ at $P
$ to find
\[
	y_iy_j-\gamma_h (y_h)^{s_h}(z_{h})^{a_h}u^{b_h}-\sum_l (y_l)^{s_l} (z_{l})^{a_l}
u^{b_l}\in R_D
\]
implying a relation with initial term $y_i y_j$.  

Next, suppose $y_i, y_j\in \{y_1, \ldots ,y_{n-1}\}$ such that $i\le j$, $d_j=d_i=1$, and $d_{j
+1}=1$ (i.e. $c_i, c_j \le \lfloor \frac{\alpha}{\beta} - 1 \rfloor$).  If $i>1$ and then $y_{j+1}
y_{i-1}$ lies in the same degree as $y_iy_j$ (degree 2) with the same pole order; following 
the same method as the previous two paragraphs we find
\[
	y_i y_j - \gamma y_{i-1} y_{j+1} - \sum_{l} (y_l)^{s_l} (z_l)^{a_l}u^{b_l}\in R_D.
\]
Similarly if $i=1$, then we get the same result using
\[
	y_i y_j - \gamma u y_{j+1} - \sum_l y_l u^{b_l} \in R_D.
\]
In both cases we deduce that $y_iy_j$ is an initial term of some relation.

Finally, we examine the case (for $\alpha \ge \beta$) of $(y_i)^{i + 1}$ when $i=\lfloor 
\frac{\alpha}{\beta}\rfloor$.  If $\beta=1$, then there are no relations with initial term a 
power of $y_i$ and we are immediately done.  Otherwise, assuming $\beta\ne 1$, we note 
that $c_id_{i+1}=c_{i+1}d_i+1=c_{i+1}+1$. \todo{reference to Evan's paper where he 
proves this}  Therefore, if $i>1$ then $c_i^{d_{i+1}+1}$ and $c_{i-1} c_{i+1}$ both lie in the 
$d_{i+1}+1$ degree with pole order $c_{i+1}+1$.  Following a similar technique to the 
previous paragraphs we find
\[
	(y_i)^{c_{i+1}+1} - y_{i+1} y_{i-1} - \sum_l (y_l)^{s_l}(z_l)^{a_l} u^{b_l}.
\]
Similarly if $i=1$ then
\[
	(y_i)^{c_{i+1}+1}-y_{i+1}u-\sum_l (z_l)^{a_l} u^{b_l}.
\]
In each case we demonstrate $(y_i)^{c_{i+1}+1}$ as the initial term of a relation.  

Let $J'$ be the ideal of $k[u, x_1, \ldots, x_m, y_1, \ldots, y_n]$ generated by the initial 
terms described in the previous paragraphs together with $\gin_\prec(I)k[u, x_1, \ldots, 
x_m, y_1, \ldots, y_n]$.  We show that $J$ is in fact all of the initial ideal.  Suppose $f$ is a 
non-constant monomial that does not lie within $J$.  Further suppose $f$ does not lie in 
$k[u, x_1, \ldots, x_m]$.  Then there is some $y_i|f$.  Since $f\not\in j$, we cannot have 
some $x_j|f$ or else we would have $y_ix_j|f$ contradicting $f\not\in J$.  Furthermore, if 
$y_l|f$ for $l<i$, then we must have $d_l=1$ or else $y_ly_i$ is an initial element of a 
relation and divides $f$.  If $d_i=1$ as well, then we must have $c_i=\lfloor \frac{\alpha}
{\beta}\rfloor$, or else $y_iy_l\in I$; finally we can not have $(y_{\lfloor \frac{\alpha}{\beta}
\rfloor})^{d_{\lfloor \frac{\alpha}{\beta} \rfloor+1}+1}|f$.  We observe that the remaining 
elements are precisely those of the form $y_n^a y_i u^b$, $y_n^a zy_iu^b$, and $y_n^a z 
u^b$ which are the elements of our chosen $k$-basis for $k[u, x_1, \ldots, x_m, y_1, \ldots, 
y_n]/I'$ over $k[u, x_1, \ldots, x_m]/I$.  Therefore, by dimension counting (in each degree), 
we see that $J'$ is the initial ideal of $I'$.  Furthermore, since our choice of $y_i$s was 
generic, this is in fact the generic initial ideal.

In the case when all $\frac{\alpha}{\beta}\le 1$, lemma \ref{lem:minimal_quadratic} immediately tells us that the Grobner basis defined above is minimal.
\todo{What about $\frac{\alpha}{beta}>1$?}
\end{proof}

\begin{rem}\label{rem:deg1_sat_ind_gen_rel_degrees}
Notice that in lemma \ref{lem:deg1_sat_ind}, $D'$ is generated in degree at most $\max(\delta,\beta)$ with relations generated in degree at most $\max(\tau,\delta+\beta,2\beta)$
\end{rem}

This yields some immediate corollaries:

\begin{cor}\label{cor:effective_Q_divisor_can_ring}
If the genus of $X$ is 0 and $D\sim\sum \frac{\alpha_i}{\beta_i} P_i$ is linearly equivalent to an effective $\mathbf{Q}$ divisor of $X$, then $R_D$ is generated in degree at most $\max(\beta_i,1)$ with relations generated in degree at most $2\max(\beta_i,1)$.
\end{cor}

\begin{proof}
We can prove this by induction.  As a base case, let $D\sim 0$.  Then $R_D\cong k[x]$ which is generated in degree 1 with no relations, satisfying the inductive hypothesis.
Now, suppose the result is proven for all effective $D$ with support at most $r$ points; then if $D'\sim \sum_{i=1}^{r+1} \frac{\alpha_i}{\beta_i}$, we set $D=\sum_i^{r} \frac{\alpha_i}{\beta_i}$.  By hypothesis, $R_D$ is generated in degree at most $\max_{1\le i\le r}(\beta_i)$ with relations generated in degree at most 2$\max_{1\le i\le r}(\beta_i)$.  Since $D$ is effective, the condition of equation \ref{eqn:deg1_sat_ind_dim} is met, so by remark \ref{rem:deg1_sat_ind_gen_rel_degrees} of lemma \ref{lem:deg1_sat_ind}, $R_{D'}$ is generated in degree at most $\max(\beta_i)$ with relations generated in degree at most $2\max(\beta_i)$.
\end{proof}

\begin{cor}\label{cor:genus_0_posiive_delta}
Let $\halfcan$ be a stacky log spin canonical divisor of signature $(0,e_1,...,e_n,\delta)$ with $\delta>0$.  Then 
\end{cor}
\begin{proof}
Since $\halfcan$ is a half canonical divisor, 
\[
	2\halfcan=D+\sum \subhalf{i}P_i
\] 
where 
\[
	D\sim K_X+\Delta\sim -2\infty+ \Delta
\] is a divisor of $X$ (i.e. with 
possibly negative integer coefficients).  Since $\Delta$ is non-
zero effective, $\deg(D)\ge -1$.   Noting that the coefficient of 
any point $P$ occurring in a stacky divisor of $\sx$ must have 
coefficient lying in $\mathbf{Z}[\frac{1}{e_i}]$ (ranging over $e_i$
s appearing in the characteristic of $(\sx,\Delta)$).
 
Since all $e_i$s are odd, $2$ cannot appear in a denominator of the 
coefficient of a point $P$ in $\halfcan$, meaning that $\frac{D}{2}$
 must be a $X$-divisor.  Since $\deg(\frac{D}{2})=\frac{1}{2}\deg(D)
\ge -\frac{1}{2}$, we in fact have $\deg(D)\ge 0$.  Thus $\halfcan$ 
is linearly equivalent to an effective $X$ divisor plus $\sum 
\subhalf{i}P_i$.  We have thus shown $\halfcan$ is linearly equivalent to an effective divisor.  Thus, by \ref{cor:effective_Q_divisor_can_ring} the desired result follows.
\end{proof}

\begin{cor}
Let $D$ be a fractional $\frac{a}{b}$-canonical divisor of a genus 0 stacky curve with denominator $b > 2$ when $\frac{a}{b}$ is written in reduced form.
\end{cor}
\begin{proof}
For a similar reason as in corollary \ref{cor:genus_0_posiive_delta}, $D$ must be equivalent to an effective divisor (in this case even when $\delta=0$), so by corollary \ref{cor:effective_Q_divisor_can_ring} we get the desired result.
\end{proof}

\todo{Add higher genus corollaries once we figure out what we want to say there}


\section{Genus Zero Non-effective}
\label{sec:g_0_non_effective}

\todo{Peter: throughout this section I will provide a few notes of how we can generalize this to arbitrary genus with the appropriate conditions}

In this section, we will prove that if $(\sx , 0, L)$ is a spin curve,
so that $\sx$ has signature $\sigma = (0; e_1, \ldots , e_r; 0)$, then
$R(\sx , 0, L)$ is generated in degree at most $e := \max(5, e_1, \ldots,
e_r)$ with relations generated in degree at most $2e$, so long as $\sigma$
does not lie in a finite list of exceptions. This is proven in
Subsection ~\ref{ssec:g_0_noneff_induction}. The proof is a rather
involved induction. In Subsections ~\ref{ssec:g_0_ram_pts},
~\ref{ssec:g_0_ram_orders} we prove inductive theorems, and in
Subsection ~\ref{ssec:g_0_base} we check the base cases of the
induction. Finally, in Subsection ~\ref{ssec:g_0_exceptional} we
list out the exceptional cases.

\ssec{Saturation}
\label{ssec:g_0_saturation} \todo{Define saturation}
Here we compute saturation numbers. That is, given a list of
ramification orders, with $g = 0,\delta = 0$ understood, we have
the following saturations of the canonical divisor, as defined in 7.
2 of Voight and Zureick-Brown \cite{vzb:stacky}. Exceptional cases are listed first
and generic cases follow.

\todo{prove}

\begin{longtable}
	{| c | c |}
	\hline
	Signature & Saturation \\
	\hline
	\hline

	$(0; 3, 3, 3; 0)$ & $\infty$ \\	\hline

	$(0; 3, 3, 5; 0)$ & $18$ \\	\hline
	
	$(0; 3, 3, 7; 0)$ & $12$ \\	\hline
	
	$(0; 3, 3, 9; 0)$ & $12$ \\	\hline
	
	$(0; 3, 5, 5; 0)$ & $8$ \\	\hline
	
	$(0; 5, 5, 5; 0)$ & $8$ \\	\hline
	
	$(0; 3, 3, 3, 3; 0)$ & $6$ \\	\hline
	
	\hline
	\hline
	
	$(0; 3, 3, k; 0)$ & $9$ \\	\hline
	
	$(0; a, b, c; 0)$ & $5$ \\	\hline
	
	$(0; e_1, \ldots, e_r; 0)$ & $3$ \\	\hline
\end{longtable}

\begin{center}
\textbf{Table (I)}: Genus 0 saturation
\end{center}

\ssec{Inductive Theorem: Increasing the Number of Ramified Points for a 3-saturated divisor}
\label{ssec:g_0_ram_pts}

\begin{prop}
\label{prop:sat_three_induction}
\todo{Make explicit assumptions on genus.}
\todo{Should switch either $R$ and $R'$ or $\sx$ and $\sx'$ to make prime notation consistent (note that inclusion is reversed since this map adds a stacky point to $\sx$; note that we should also say that this map is only ramified at $P$), Aaron: you're right, I wrote the inclusion on rings in the wrong direction. Actually, the map isn't ramified at $P$, it's just defined away from $P$. I decided to remove this from the proposition though.} Let $R_{L'} = R' = k[x]/I'= k[x_3, x_4
, x_5,\ldots, x_m]/I'$ satisfy $sat(Eff(D')) = 3.$ Let $L = L' + \frac{1}{
3}P$, and let $R = R_L$. Suppose $\deg x_i = i$ for $i \in \{3, 4, 5\}$ and that the ordering on $k[x]$ satisfies
\begin{align*}
	\ord_{x_3}(f) < \ord_{x_3}(h) \implies f \prec h.
\end{align*}
Then, the following statements hold.

\todo{Peter: Do you mean to have $D=\frac{1}{3}P+D'$ or is it correct as written?}.
\todo{Peter: We can generalize to arbitrary genus with the condition $\deg(D)>2g-2$ meaning $h^0(X,K-D)=0$ so Riemann-Roch gives us everything we wanted from $\mathbb{P}^1$.}

\begin{enumerate}
	\item[(a)] General elements  $y_i \in H^0(\sx,iL)$ for $i \in \{3,
		4,5\}$ satisfy $-\ord_P(y_i) = 1$ and any such choice of elements $y
		_3,y_4,$ and$ y_5$ minimally generate $R$ over $R'$.
	\item[(b)] Equip $k[y_3, y_4, y_5]$ with $grlex$ so that $y_5 \prec 
		y_4 \prec y_3$
		and equip the ring $k[y_3, y_4, y_5, x]$ with the block 
		order so that $R = k[y_3, y_4, y_5, x]/I$. Let,
		\begin{align*}
			J &= gin_\prec(I')k[x,y_3,y_4,y_5] \\
			&+\langle y_i x_j \mid 4 \leq i \leq 5, 3 \leq j \leq m\rangle \\
			&+\langle y_iy_k \mid 4 \leq i \leq j \leq 5.\rangle 
		\end{align*}
			Then, $gin_\prec(I) = J$.
	\item[(c)] Any set of minimal generators for $I'$ together with 
		any set of relations with leading terms as in (b) minimally 
		generate $I$.
\end{enumerate}
\end{prop}

\begin{proof}
First, the elements $y_3,y_4,$ and $y_5$ are general and have $-\ord
_P(y_i) = 1$ by Riemann Roch. \todo{Understand why/whether we need 
to cite lemma 5.4.7.} To complete the proof of (a) we only need 
show these elements generate $R$ over $R'$. We can first see that 
the following is a $k$ basis for $R$ over $R'$:

\begin{align}
\label{eqn:add_one_generator}
	\begin{split}
		&\langle y_3^ax_3^b x_4^\epsilon x_5^{\epsilon'} \mid a \geq 0, b 
		\geq 0,(\epsilon,\epsilon') \in \{(0,0),(0,1),(1,0)\} \rangle \\
		&+\langle y_3^ay_4,y_3^by_5 \mid a \geq 0, b \geq 0 \rangle
	\end{split}
\end{align}

\noindent
To see these generate $R'$ over $R$, note that $\dim R'_d - \dim_k R
_d = \lfloor \frac{d}{3} \rfloor,$ by Riemann--Roch. So, it
suffices to show that we have precisely $\lfloor \frac{d}{3} \rfloor
,$ elements of degree $d$ in the claimed basis of
~\ref{eqn:add_one_generator}. Indeed, letting $a = \lfloor \frac{d}{3}
\rfloor $ and $b = d \bmod 3$, we have that the elements

\begin{align*}
	x_3^{a-1}x_{3+b},y_3x_3^{a-2}x_{3+b},\ldots, y_3^ax_{3+b},y_3^ay_{
3+b}
\end{align*}

\noindent
are precisely $a$ elements, which are all independent as they have
distinct pole orders at $P$. This completes part (a).

To show part (b), note that the generators in
~\ref{eqn:add_one_generator} are precisely a set of monomials which
generate $k[x,y]/J$ over $k$. So, to show $J = in_\prec(I)$, it
suffices to show that all generators of $J$ lie in $in_\prec(I)$.

This follows, since there exist constants $A_{i,j} \in k$ for $4
\leq i \leq 5,3 \leq j \leq m,$ elements $B_1,B_2,B_3 \in k$ and
elements $w_{i,j} \in R'$ so that the following linear combinations
of elements lie in $R'$.

\begin{align*}
	y_ix_j &- A_{i,j} y_{i-1}w_j & \text{ so that } 4 \leq i \leq 5,3
	\leq j \leq m \text{ and } \deg w_j = \deg x_j + 1\\
	y_4^2 &+ B_1 y_3 y_5 \\
	y_4y_5 &+ B_2 y_3^2 x_3 \\
	y_5^2 &+ B_3 y_3^2 x_4
\end{align*}

\noindent
Of course, the initial terms of these elements are precisely the
generators of $J$, completing (b).

Finally, (c) follows immediately from Lemma ~\ref{lem:minimal_quadratic}
\end{proof}

Here we describe induction of raising degrees from Theorem ~\ref{thm:ram_order_ind}
\todo{fill out}

\ssec{Base Cases}
\label{ssec:g_0_base}
Now we have an inductive statement on the number of ramified
points in Proposition ~\ref{prop:sat_three_induction} and
an inductive statement on ramification orders in Theorem
~\ref{thm:ram_order_ind}. After verifying that explicit pairs
$(\sx, J)$ of stacky curves $\sx$ with particular signatures and
particular choices of $J$ are admissible, the application of the
two inductive statements demonstrate that the spin canonical ring
$R(\sx , 0, L)$ is generated in degree at most $e := \max(5, e_1,
\ldots, e_r)$ with relations generated in degree at most $2e$ for
$\sx$ with any signature $\sigma = (0; e_1, \ldots , e_r; 0)$ outside
of a finite set of exceptional cases.

\begin{lem}
\label{lem:g_0_admissible_cases}
Let $(\sx', \Delta, L')$ be a tame log spin curve over a perfect field $k$,
so that $\sx$ has signature $\sigma = (0; e_1, \ldots, e_r; 0)$.
Then $R' := R(\sx', \Delta, L')$ is generated as a $k$-algebra by elements
of degree at most $e = \max(5,e_1,\ldots, e_r)$ with relations in degree
at most $2e$ and $(\sx', J)$ is admissible for the following cases:

\begin{enumerate}
	\item[(a)] $\sigma_1 = (0; 3, 3, 11; 0), J_1 = \{3\}$
	\item[(b)] $\sigma_2 = (0; 3, 5, 9; 0), J_2 = \{3\}$
	\item[(c)] $\sigma_3 = (0; 3, 7, 7; 0), J_3 = \{2, 3\}$
	\item[(d)] $\sigma_4 = (0; 5, 5, 7; 0), J_4 = \{3\}$
	\item[(e)] $\sigma_5 = (0; 5, 7, 7; 0), J_5 = \{2, 3\}$
	\item[(f)] $\sigma_6 = (0; 7, 7, 7; 0), J_6 = \{1, 2, 3\}$
	\item[(g)] $\sigma_7 = (0; 3, 3, 3, 5; 0), J_7 = \{4\}$
	\item[(h)] $\sigma_8 = (0; 3, 3, 5, 5; 0), J_8 = \{3, 4\}$
	\item[(i)] $\sigma_9 = (0; 3, 5, 5, 5; 0), J_9 = \{2, 3, 4\}$
	\item[(j)] $\sigma_{10} = (0; 5, 5, 5, 5; 0), J_{10} = \{1, 2, 3, 4\}$
	\item[(k)] $\sigma_{11} = (0; 3, 3, 3, 3, 3; 0), J_{11} = \{1, 2, 3, 4, 5\}$
\end{enumerate}

\noindent
Furthermore, $R'$ satisfies the hypothesis of Theorem ~\ref
{thm:ram_order_ind}(d), which asserts that for all $i \in J$, $e_i >
\deg z$ for any generator $z$ of $R'$ and if $R' = k[y, x]/I'$
(as defined in Theorem ~\ref{thm:ram_order_ind}(c)) then
$in_\prec(I')$ is minimally generated by products of two monomials.
\end{lem}

\begin{proof}
For each case, computations using a combination of Riemann-Roch and
comparing pole orders at each ramification point $P_i$ gives the
generator and relation degrees.

The following table demonstrates that $R(\sx', \Delta, L')$ is
generated as a $k$-algebra by elements of degree at most $e$
with relations in degree at most $2e$ for each case. Also note
that in these cases, $e_i = e + 2 > \deg z$ for all $i \in J$
and any generator $z$ of $R'$.

\begin{longtable}
	{| c || c | c | c |}
	\hline
	Case & Generator Degrees & Minimal Relation Degrees & $e$\\
	\hline
	\hline

	(a) & \{3, 7, 9, 11\} & \{14, 18\} & 11\\	\hline

	(b) & \{3, 5, 7, 9\} & \{12, 14\}	& 9\\ \hline
	
	(c) & \{3, 5, 5, 7\} & \{10, 12\}	& 7\\ \hline

	(d) & \{3, 5, 7, 7\} & \{10, 14\}	& 7\\ \hline
	
	(e) & \{3, 5, 5, 7, 7\} & \{10, 10, 12, 12, 14\}	& 7\\ \hline
	
	(f) & \{3, 5, 5, 7, 7, 7\} & \{10, 10, 10, 12, 12, 12, 14, 14, 14\}	& 7\\ \hline

	(g) & \{3, 3, 4, 5\} & \{8, 9\} & 5\\ \hline
	
	(h) & \{3, 3, 4, 5, 5\} & \{8, 8, 9, 9, 10\} & 5\\ \hline
	
	(i) & \{3, 3, 4, 5, 5, 5\} &
	\{8, 8, 8, 9, 9, 9, 10, 10, 10\} & 5\\ \hline
	
	(j) & \{3, 3, 4, 5, 5, 5, 5\} &
	\{8, 8, 8, 8, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10\} & 5\\ \hline

	(k) &	\{3, 3, 3, 4,	4, 5\} & \{6, 7, 7, 8, 8, 8, 9, 9, 10\} & 5\\ \hline
\end{longtable}

\begin{center}
\textbf{Table (II)}: Genus 0 noneffective base cases generator/relations
\end{center}

Note that (Ad-i) always holds.
In each case we can also pick a set of generators such that
(Ad-ii) holds. \todo{justification for these}

Furthermore, each case satisfies (Ad-iii) as demonstrated below.
Notice that the $e_i$ and $\{e_j' : j \neq i\}$ are equivalent
for any choice of $i \in J$ for these cases, so $\deg \lfloor e_i L
\rfloor$ and $\max_{d \geq 0} \#S_{(\sigma, J)}(i)$ are
independent of the choice of $i$.

\begin{longtable}
	{| c | c | c || c | c |}
	\hline
	Case & $\sigma$ & $J$ & $\deg \lfloor e_i L \rfloor$ & $\max_{d \geq 0} \#S_{(\sigma, J)}(i))$\\
	\hline
	\hline

	(a) & $(0; 3, 3, 11; 0)$ & $\{3\}$ & 1 & 0\\	\hline
	
	(b) & $(0; 3, 5, 9; 0)$ & $\{3\}$ & 1 & 0\\ \hline
	
	(c) & $(0; 3, 7, 7; 0)$ & $\{3\}$ & 2 & 0\\ \hline
	
	(d) & $(0; 5, 5, 7; 0)$ & $\{3\}$ & 1 & 0\\ \hline
	
	(e) & $(0; 5, 7, 7; 0)$ & $\{2, 3\}$ & 2 & 0\\ \hline

	(f) & $(0; 7, 7, 7; 0)$ & $\{1, 2, 3\}$ & 3 & 0\\ \hline

	(g) & $(0; 3, 3, 3, 5; 0)$ & $\{4\}$ & 2 & 0\\ \hline
	
	(h) & $(0; 3, 3, 5, 5; 0)$ & $\{3, 4\}$ & 3 & 0\\ \hline
	
	(i) & $(0; 3, 5, 5, 5; 0)$ & $\{2, 3, 4\}$ & 4 & 0\\ \hline
	
	(j) & $(0; 5, 5, 5, 5; 0)$ & $\{1, 2, 3, 4\}$ & 5 & 0\\ \hline

	(k) & $(0; 3, 3, 3, 3, 3; 0)$ & $\{1, 2, 3, 4, 5\}$ & 5 & 0\\ \hline
\end{longtable}

\begin{center}
\textbf{Table (III)}: Genus 0 noneffective base cases (Ad-iii)
\end{center}

Thus, we have admissibility of $(\sx', J)$ in each of these cases.

Finally, each case also satisfies the property that $in_\prec(I')$ is
minimally generated by products of two monomials.
\todo{prove}
\end{proof}

Now we can induct on cases (a)-(e) of \ref{lem:g_0_admissible_cases}
to obtain bounds on the minimal generator and relation degrees for
canonical rings of curves in the genus 0 case.

Using the results of Proposition ~\ref{prop:sat_three_induction}
and Theorem ~\ref{thm:ram_order_ind}, we can inductively raise
the ramification orders and number of ramified points in all of the
cases in Lemma ~\ref{lem:g_0_admissible_cases} to obtain the following
result.

\begin{cor}
\label{cor:g_0_gen_rel_base_cases}
Let $(\sx, \Delta, L)$ be a tame log spin curve over a perfect field $k$, so
that $\sx$ has signature $\sigma = (0; e_1, \ldots, e_r; 0)$. Then the
canonical ring

\[
	R(\sx, 0, L) = \bigoplus_{d = 0}^\infty H^0(\sx, \sco(L)^{\otimes d})
\]

\noindent
is generated as a $k$-algebra by elements of degree at most $e := 
\max(5, e_1, \ldots, e_r)$ with relations in degree at most $2e$, so 
long as $\sigma \notin S$ where

\begin{align*}
	S &:= \{(0; 3, 3, k; 0) : 3 \leq k \leq 9 \text{ odd}\} \\
		&\cup \{(0; 3, b, c; 0) : 5 \leq b \leq c \leq 7\} \\
		&\cup \{(0; 5, 5, 5; 0), (0; 3, 3, 3, 3; 0)\}
\end{align*}

\noindent
is a finite set.
\end{cor}

\begin{proof}
A process of induction raising the ramification orders of
the ramified points of the spin curves corresponding to Lemma
~\ref{lem:g_0_admissible_cases} cases (a)-(c) via Theorem
~\ref{thm:ram_order_ind} will demonstrate the desired generator and
relation degree results for curves with three ramified points.
Similarly, this induction process on Lemma
~\ref{lem:g_0_admissible_cases} case (d) will give the desired
result for curves with four ramified points excluding signature
$(0; 3, 3, 3, 3; 0)$. A process of induction increasing the
number of ramified points via Proposition
~\ref{prop:sat_three_induction} on Lemma ~\ref{lem:g_0_admissible_cases}
case (e) combined with the induction process on ramification orders
will yield the result for curves with at least five ramified points.
\todo{Detailed description of how the inductive lemmata yield e and 2e}
\end{proof}

\ssec{Exceptional Cases}
\label{ssec:g_0_exceptional}
Here we present the explicit generators and relations of the remaining
cases given by signatures in the finite set

\begin{align*}
	S &:= \{(0; 3, 3, k; 0) : 3 \leq k \leq 9 \text{ odd}\} \\
		&\cup \{(0; 3, b, c; 0) : 5 \leq b \leq c \leq 7\} \\
		&\cup \{(0; 5, 5, 5; 0), (0; 3, 3, 3, 3; 0)\}
\end{align*}

\noindent
and in particular describe the only exceptions to the $e$ and $2e$
bounds on the generator degree and relation degree, respectively,
in the genus 0 case.


\begin{longtable}
	{| c || c | c | c |}
	\hline
	Signature & Generator Degrees & Minimal Relation Degrees & $e$ \\
	\hline
	\hline

	$(0; 3, 3, 3; 0)$ & $\{3\}$ & $\emptyset$ & $3$ \\	\hline

	$(0; 3, 3, 5; 0)$ & $\{3, 10, 15\}$ & $\{30\}$ & $5$ \\	\hline
	
	$(0; 3, 3, 7; 0)$ & $\{3, 7, 12\}$ & $\{24\}$ & $7$ \\	\hline
	
	$(0; 3, 3, 9; 0)$ & $\{3, 7, 9\}$ & $\{21\}$ & $9$ \\	\hline
	
	$(0; 3, 5, 5; 0)$ & $\{3, 5, 10\}$ & $\{20\}$ & $5$ \\	\hline
	
	$(0; 3, 5, 7; 0)$ & $\{3, 5, 7\}$ & $\{17\}$ & $7$ \\	\hline
	
	$(0; 5, 5, 5; 0)$ & $\{3, 5, 5\}$ & $\{15\}$ & $5$ \\	\hline
	
	$(0; 3, 3, 3, 3; 0)$ & $\{3, 3, 4\}$ & $\{12\}$ & $3$ \\	\hline

	\hline
	\hline
	
	$(0; 3, 7, 7; 0)$ & $\{3, 5, 7, 7\}$ & $\{10, 14\}$ & $7$ \\	\hline
\end{longtable}

\begin{center}
\textbf{Table (IV)}: Genus 0 exceptional cases
\end{center}

\begin{rem}
These cases, apart from $(0; 3, 7, 7; 0)$, give all of the
exceptions to the $e$ and $2e$ bounds on the generator and relation
degree. Notice that each of these exceptional cases, apart from
$(0; 3, 5, 7; 0)$, corresponds to a signature with non-generic
saturation (i.e. saturation not equal to 3, 5, or 9 as seen
in the table in Subsection ~\ref{ssec:g_0_saturation}). Exceptional
saturation can be viewed as ``forcing'' generators (and thus
relations) in higher degrees than in the generic case.
\end{rem}


\ssec{Application of induction}
\label{ssec:g_0_noneff_induction}
Now we can combine this.

\begin{thm}
\label{thm:g_0_generators_relations_rep}
Let $(\sx, \Delta, L)$ be a tame log spin curve over a perfect field $k$, so
that $\sx$ has signature $\sigma = (0; e_1, \ldots, e_r; \delta)$. Then the
canonical ring

\begin{align*}
	R(\sx, \Delta, L) = \bigoplus_{d = 0}^\infty H^0(\sx, \sco(L)^{\otimes d})
\end{align*}

\noindent
is generated as a $k$-algebra by elements of degree at most $e = 
\max(5,e_1,\ldots, e_r)$ with relations in degree at most $2e$, so 
long as $\sigma$ does not lie in a finite list of exceptions. \todo{
Include reference to the table with this list of exceptions.}
\end{thm}


\section{Acknowledgements}
We are grateful to David Zureick-Brown for introducing us to this
field of study, providing incredibly helpful guidance, and being an
excellent project mentor. We also thank Ken Ono and the Emory University
Number Theory REU for arranging our project and providing a great
environment for mathematical learning and collaboration. Finally, we
gratefully acknowledge that our research was financially supported by
NSF Grant Award Number 1250467 via the Emory University Number Theory REU.
We deeply appreciate all of the support that has made our work possible.

\nocite{*}
\bibliography{bibliography}{}
\bibliographystyle{plain}

\end{document}